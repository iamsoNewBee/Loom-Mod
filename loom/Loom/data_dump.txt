IMPORTANT:
This is just the packs data in a readable format used for debugging stuff.
Changes made here have no effect at all. This is intended.

{   ManagerList: {      [0]: {         Name: "OreDictEntryRegistry"         ContentList: {         }      }      [1]: {         Name: "CreativeTabRegistry"         ContentList: {         }      }      [2]: {         Name: "FuelRegistry"         ContentList: {         }      }      [3]: {         Name: "SmeltingRecipeRegistry"         ContentList: {         }      }      [4]: {         Name: "ShapedRecipeRegistry"         ContentList: {         }      }      [5]: {         Name: "ShapelessRecipeRegistry"         ContentList: {         }      }      [6]: {         Name: "ArmorMaterialRegistry"         ContentList: {         }      }      [7]: {         Name: "ItemRegistry"         ContentList: {            [0]: {               Name: "flaxRope"               Attributes: {                  displayName: {                     Value: "麻线"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:rope"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var data = world.getBlockMetadata(x, y, z);
var inv = player.getInventory();
var i = player.getCurrentSlot();
var name = inv.getItemName(i);

// 只处理 Loom:flaxRope 物品
if (name == "Loom:flaxRope") {
    var blockAbove = world.getBlockName(x, y + 1, z);
    var currentBlock = world.getBlockName(x, y, z);

    // 检查当前方块是否为织布机方块（H到A，H1到A1）
    var isLoomBlock =
        currentBlock == "Loom:loomH1" || currentBlock == "Loom:loomG1" ||
        currentBlock == "Loom:loomF1" || currentBlock == "Loom:loomE1" ||
        currentBlock == "Loom:loomD1" || currentBlock == "Loom:loomC1" ||
        currentBlock == "Loom:loomB1" || currentBlock == "Loom:loomA1" ||
        currentBlock == "Loom:loomH" || currentBlock == "Loom:loomG" ||
        currentBlock == "Loom:loomF" || currentBlock == "Loom:loomE" ||
        currentBlock == "Loom:loomD" || currentBlock == "Loom:loomC" ||
        currentBlock == "Loom:loomB" || currentBlock == "Loom:loomA";

    if (isLoomBlock) {
        // 如果不是织布机方块，则不进行交互



        // 第一次交互 - 上方是空气，放置标记方块
        if (blockAbove == "minecraft:air") {
            // 放置标记方块
            world.setBlock(x, y + 1, z, "Loom:loomFlaxDef");
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            inv.remove("Loom:flaxRope", 0, 1);

            // 根据当前方块状态进行转换
            if (currentBlock == "Loom:loomH1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomG1", data);
            } else if (currentBlock == "Loom:loomH") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomG", data);
            }
        }
        // 后续交互 - 检查标记方块是否正确
        else if (blockAbove == "Loom:loomFlaxDef") {
            player.swingItem();
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            inv.remove("Loom:flaxRope", 0, 1);

            // 状态转换逻辑
            if (currentBlock == "Loom:loomH1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomG1", data);
            } else if (currentBlock == "Loom:loomG1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomF1", data);
            } else if (currentBlock == "Loom:loomF1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomE1", data);
            } else if (currentBlock == "Loom:loomE1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
            } else if (currentBlock == "Loom:loomD1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
            } else if (currentBlock == "Loom:loomC1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
            } else if (currentBlock == "Loom:loomB1") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
            } else if (currentBlock == "Loom:loomA1") {
                // 最终产出阶段
                world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
                world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
                world.spawnItem(x, y, z, "hbm:item.plant_item", 1, 1); // 生成产物
            } else if (currentBlock == "Loom:loomH") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomG", data);
            } else if (currentBlock == "Loom:loomG") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomF", data);
            } else if (currentBlock == "Loom:loomF") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomE", data);
            } else if (currentBlock == "Loom:loomE") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
            } else if (currentBlock == "Loom:loomD") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
            } else if (currentBlock == "Loom:loomC") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
            } else if (currentBlock == "Loom:loomB") {
                world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
            } else if (currentBlock == "Loom:loomA") {
                // 最终产出阶段
                world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
                world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
                world.spawnItem(x, y, z, "hbm:item.plant_item", 1, 1); // 生成产物
            }
        } else {
            // 标记方块不匹配
            player.sendMessage("§cThis loom is already processing a different material!");
        }
    }
}"                  }                  onUseFirst: {                     Value: ""                  }                  maxDamage: {                     Value: 0                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [1]: {               Name: "woolLoop"               Attributes: {                  displayName: {                     Value: "毛线圈"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:stringroll"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var data = world.getBlockMetadata(x, y, z);
var inv = player.getInventory();
var i = player.getCurrentSlot();
var itemstack = inv.getStack(i);
var blockAbove = world.getBlockName(x, y + 1, z);
var currentBlock = world.getBlockName(x, y, z);

// 第一次交互 - 上方是空气，放置标记方块
if (blockAbove == "minecraft:air") {
    // 放置标记方块
    world.setBlock(x, y + 1, z, "Loom:loomStringDef");
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    player.swingItem();
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.spawnItem(x, y, z, "hbm:item.rag", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.spawnItem(x, y, z, "minecraft:wool", 1, 0); // 生成产物
    }
}
// 后续交互 - 检查标记方块是否正确
else if (blockAbove == "Loom:loomStringDef") {
    player.swingItem();
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "hbm:item.rag", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "hbm:item.rag", 1, 0); // 生成产物
    }
}"                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 2                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [2]: {               Name: "hempLoop"               Attributes: {                  displayName: {                     Value: "麻线圈"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:string"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var data = world.getBlockMetadata(x, y, z);
var inv = player.getInventory();
var i = player.getCurrentSlot();
var itemstack = inv.getStack(i);
var blockAbove = world.getBlockName(x, y + 1, z);
var currentBlock = world.getBlockName(x, y, z);

// 第一次交互 - 上方是空气，放置标记方块
if (blockAbove == "minecraft:air") {
    // 放置标记方块
    world.setBlock(x, y + 1, z, "Loom:loomFlaxDef");
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    player.swingItem();
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    }
}
// 后续交互 - 检查标记方块是否正确
else if (blockAbove == "Loom:loomFlaxDef") {
    player.swingItem();
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    }
}"                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 2                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [3]: {               Name: "grassLoop"               Attributes: {                  displayName: {                     Value: "草线圈"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:stringgrass"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var data = world.getBlockMetadata(x, y, z);
var inv = player.getInventory();
var i = player.getCurrentSlot();
var itemstack = inv.getStack(i);
var blockAbove = world.getBlockName(x, y + 1, z);
var currentBlock = world.getBlockName(x, y, z);

// 第一次交互 - 上方是空气，放置标记方块
if (blockAbove == "minecraft:air") {
    // 放置标记方块
    world.setBlock(x, y + 1, z, "Loom:loomGrassDef");
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    player.swingItem();
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    }
}
// 后续交互 - 检查标记方块是否正确
else if (blockAbove == "Loom:loomGrassDef") {
    player.swingItem();
    world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
    itemstack.damageItem(1); // 减少耐久度
    
    // 状态转换逻辑 (一次交互转变三个状态)
    if (currentBlock == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
    } else if (currentBlock == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
    } else if (currentBlock == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
    } else if (currentBlock == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
    } else if (currentBlock == "Loom:loomA1") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    } else if (currentBlock == "Loom:loomH") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
    } else if (currentBlock == "Loom:loomG") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
    } else if (currentBlock == "Loom:loomF") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
    } else if (currentBlock == "Loom:loomE") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomD") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomC") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomB") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
    } else if (currentBlock == "Loom:loomA") {
        world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
        world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    }
}"                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 2                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [4]: {               Name: "grassRope"               Attributes: {                  displayName: {                     Value: "草线"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:grassrope"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "// Loom:grassRope 物品的交互脚本 (修正版)
var x = position.x;
var y = position.y;
var z = position.z;
var inv = player.getInventory();
var i = player.getCurrentSlot();
var name = inv.getItemName(i);
var currentBlock = world.getBlockName(x, y, z);
var data = world.getBlockMetadata(x, y, z); // 获取当前方块的元数据

// 只处理 Loom:grassRope 物品
if (name == "Loom:grassRope") {
    var blockAbove = world.getBlockName(x, y + 1, z);
    
    // 第一次交互 - 上方是空气，放置标记方块
    if (blockAbove == "minecraft:air") {
        // 放置标记方块
        world.setBlock(x, y + 1, z, "Loom:loomGrassDef");
        world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
        player.swingItem();
        inv.remove("Loom:grassRope", 0, 1);
        
        // 根据当前方块状态进行转换，保持元数据不变
        if (currentBlock == "Loom:loomH1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomG1", data);
        } else if (currentBlock == "Loom:loomH") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomG", data);
        }
    }
    // 后续交互 - 检查标记方块是否正确
    else if (blockAbove == "Loom:loomGrassDef") {
        player.swingItem();
        world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
        inv.remove("Loom:grassRope", 0, 1);
        
        // 状态转换逻辑，保持元数据不变
        if (currentBlock == "Loom:loomH1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomG1", data);
        } else if (currentBlock == "Loom:loomG1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomF1", data);
        } else if (currentBlock == "Loom:loomF1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomE1", data);
        } else if (currentBlock == "Loom:loomE1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomD1", data);
        } else if (currentBlock == "Loom:loomD1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomC1", data);
        } else if (currentBlock == "Loom:loomC1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomB1", data);
        } else if (currentBlock == "Loom:loomB1") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomA1", data);
        } else if (currentBlock == "Loom:loomA1") {
            // 最终产出阶段
            world.setBlockAndMetadata(x, y, z, "Loom:loomH1", data);
            world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
            world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
        } else if (currentBlock == "Loom:loomH") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomG", data);
        } else if (currentBlock == "Loom:loomG") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomF", data);
        } else if (currentBlock == "Loom:loomF") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomE", data);
        } else if (currentBlock == "Loom:loomE") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomD", data);
        } else if (currentBlock == "Loom:loomD") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomC", data);
        } else if (currentBlock == "Loom:loomC") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomB", data);
        } else if (currentBlock == "Loom:loomB") {
            world.setBlockAndMetadata(x, y, z, "Loom:loomA", data);
        } else if (currentBlock == "Loom:loomA") {
            // 最终产出阶段
            world.setBlockAndMetadata(x, y, z, "Loom:loomH", data);
            world.setBlock(x, y + 1, z, "minecraft:air"); // 清除标记方块
            world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
        }
    } else {
        // 标记方块不匹配
        player.sendMessage("§cThis loom is already processing a different material!");
    }
}"                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 0                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [5]: {               Name: "grassString"               Attributes: {                  displayName: {                     Value: "草纤维"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:grarssfiber"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 0                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [6]: {               Name: "flintKnife"               Attributes: {                  displayName: {                     Value: "燧石刀"                  }                  onUpdate: {                     Value: ""                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                     Value: ""                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 1                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:flintknife"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 1                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                     Value: "// 破坏方块时的处理
var x = position.x;
var y = position.y;
var z = position.z;
var blockName = world.getBlockName(x, y, z);

// 破坏草时掉落草绳
if (blockName == "minecraft:tallgrass") {
    world.spawnItem(x, y, z, "Loom:grassString", 1, 0);
    itemstack.damageItem(1); // 减少耐久度
}
// 破坏枯死的灌木和树叶时掉落木棍
else if (blockName == "minecraft:deadbush" || 
         blockName == "minecraft:leaves" ||
         blockName == "minecraft:leaves2" ||
         blockName == "BiomesOPlenty:appleLeaves" ||
         blockName == "BiomesOPlenty:persimmonLeaves" ||
         blockName == "BiomesOPlenty:colorizedLeaves1" ||
         blockName == "BiomesOPlenty:colorizedLeaves2" ||
         blockName == "BiomesOPlenty:leaves4" ||
         blockName == "BiomesOPlenty:leaves1" ||
         blockName == "BiomesOPlenty:leaves2" ||
         blockName == "BiomesOPlenty:leaves3" ||
         blockName == "etfuturum:leaves") {
    world.spawnItem(x, y, z, "minecraft:stick", 1, 0);
    world.spawnItem(x, y, z, "Loom:grassString", 2, 0);
    itemstack.damageItem(1); // 减少耐久度
}"                  }                  containerItem: {                  }                  onBlockStartBreak: {                     Value: ""                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                     Value: "// 右键方块时的处理
var x = position.x;
var y = position.y;
var z = position.z;
var blockName = world.getBlockName(x, y, z);

// 潜行状态下右键草方块
if (player.isSneaking() && blockName == "minecraft:grass") {
    // 将草方块转变为泥土
    world.setBlock(x, y, z, "minecraft:dirt");
    // 在上方生成草绳
    world.spawnItem(x, y + 1, z, "Loom:grassString", 1, 0);
    itemstack.damageItem(1); // 减少耐久度
}"                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 131                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }            [7]: {               Name: "grassFabric"               Attributes: {                  displayName: {                     Value: "纤维布"                  }                  onUpdate: {                  }                  enchantability: {                     Value: 0                  }                  efficiency: {                     Value: 1.0f                  }                  onHitEntity: {                  }                  onEaten: {                  }                  hasEffect: {                     Value: 0b                  }                  onDroppedByPlayer: {                  }                  anvilMaterial: {                  }                  onCreated: {                  }                  onUsing: {                  }                  onLeftClickPlayer: {                  }                  full3d: {                     Value: 0b                  }                  information: {                  }                  onUseOnPlayer: {                  }                  maxStack: {                     Value: 64                  }                  onUseOnEntity: {                  }                  icon: {                     Value: "loom:grassfrabic"                  }                  maxUsingDuration: {                     Value: 0                  }                  onStoppedUsing: {                  }                  toolClasses: {                     Value: {                     }                  }                  onLeftClickLiving: {                  }                  damage: {                     Value: 0                  }                  renderScale: {                     Value: 1.0f                  }                  onBlockDestroyed: {                  }                  containerItem: {                  }                  onBlockStartBreak: {                  }                  creativeTab: {                     Value: "search"                  }                  onRightClick: {                  }                  onUse: {                  }                  onUseFirst: {                  }                  maxDamage: {                     Value: 0                  }                  leaveContainerItem: {                     Value: 0b                  }                  usingAction: {                     Value: "none"                  }               }               Type: "normal"            }         }      }      [8]: {         Name: "TileEntityRegistry"         ContentList: {         }      }      [9]: {         Name: "GuiRegistry"         ContentList: {         }      }      [10]: {         Name: "BlockRegistry"         ContentList: {            [0]: {               Name: "loomA"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_front"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
world.harvestBlock(x, y+1, z);"                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_top"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomA"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomH";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

// keepUsing("minecraft:string", next, "Loom:loomStringDef");

loomFinalOutput("minecraft:string", next, "Loom:loomStringDef","minecraft:wool");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [1]: {               Name: "loomB"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_side"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontB"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topB"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomB"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomA";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [2]: {               Name: "loomC"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontC"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topC"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomC"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomB";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [3]: {               Name: "loomD"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontD"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topD"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomD"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomC";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [4]: {               Name: "loomE"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontE"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topE"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomE"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomD";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [5]: {               Name: "loomF"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontF"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topF"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomF"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomE";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [6]: {               Name: "loomG"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontG"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topG"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomG"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomF";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [7]: {               Name: "loomH"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontH"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topH"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomH"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomG";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

//keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [8]: {               Name: "loomA1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_front"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
world.harvestBlock(x, y+1, z);"                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topA1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomA1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomH1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

//keepUsing("minecraft:string", next, "Loom:loomStringDef");

loomFinalOutput("minecraft:string", next, "Loom:loomStringDef", "minecraft:wool");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [9]: {               Name: "loomB1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontB"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topB1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomB1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomA1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [10]: {               Name: "loomC1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontC"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topC1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomC1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomB1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [11]: {               Name: "loomD1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontD"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topD1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomD1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomC1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [12]: {               Name: "loomE1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontE"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topE1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomE1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomD1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [13]: {               Name: "loomF1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontF"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topF1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomF1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomE1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [14]: {               Name: "loomG1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                  }                  textureFront: {                     Value: "loom:loom_frontG"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topG1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomG1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 0b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomF1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

//startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [15]: {               Name: "loomH1"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:loom_bottom"                  }                  onPlacedByPlayer: {                     Value: "var side   = player.getLookingSide()
var x      = position.x
var y      = position.y
var z      = position.z
//world.sendMessageToAllPlayers("the side is " + side)
if (side == 0) {
     //South
world.setBlockAndMetadata(position, "Loom:loomH", 2)
}

if (side == 1) {
     // West
world.setBlockAndMetadata(position, "Loom:loomH", 5)

}
"                  }                  textureFront: {                     Value: "loom:loom_frontH"                  }                  onClicked: {                  }                  textureSides: {                     Value: "loom:loom_side"                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  onUpdate: {                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onBreak: {                  }                  canRotatable: {                     Value: 0b                  }                  canFaceTop: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:loom_topH1"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: ""                  }                  material: {                     Value: "wood"                  }                  onAdded: {                     Value: ""                  }                  textureEast: {                     Value: ""                  }                  toolClass: {                  }                  stepSound: {                     Value: "stone"                  }                  canFaceBottom: {                     Value: 0b                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:loomH1"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 255                  }                  rotateSideTextures: {                     Value: 1b                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  canFaceSides: {                     Value: 1b                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: ""                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                     Value: ""                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "// 根据方向更新织布机方块的函数
var next = "Loom:loomG1";
function updateLoomByDirection(blockName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var data = world.getBlockMetadata(position);
    
    // 根据方向更新织布机
    if (data == 3) {
        // North
        world.setBlockAndMetadata(x, y, z, blockName, 3);
    } else if (data == 4) {
        // East
        world.setBlockAndMetadata(x, y, z, blockName, 4);
    } else if (data == 2) {
        // South
        world.setBlockAndMetadata(x, y, z, blockName, 2);
    } else if (data == 5) {
        // West
        world.setBlockAndMetadata(x, y, z, blockName, 5);
    }
}

// 第一阶段：空机器初始化
function startUseItemOnLoom(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);
    
    if (name == itemName) {
        if (world.getBlockName(x, y + 1, z) == "minecraft:air") {
            // 放置定义方块并更新织布机状态
            world.setBlock(x, y + 1, z, defBlock);
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            player.swingItem();
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            sendMessageToAllPlayers("§cYou need to keep a block above to use the loom!");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第二阶段：中间处理阶段
function keepUsing(itemName, nextBlockName, defBlock) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);
            
            // 消耗物品
            inv.remove(itemName, 0, 1);
            
            // 使用新函数根据方向更新织布机
            updateLoomByDirection(nextBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

// 第三阶段：最终产出阶段 - 完成后重置为初始机器
function loomFinalOutput(itemName, initialBlockName, defBlock, outputItemName) {
    var x = position.x;
    var y = position.y;
    var z = position.z;
    var inv = player.getInventory();
    var i = player.getCurrentSlot();
    var name = inv.getItemName(i);

    if (name == itemName) {
        player.swingItem();
        
        // 检查上方的定义方块是否正确
        if (world.getBlockName(x, y + 1, z) == defBlock) {
            world.spawnParticle("cloud", x, y + 1, z, 0.1, 0.1, 0.1);

            // 消耗物品并生成产出
            inv.remove(itemName, 0, 1);
            world.spawnItem(x, y, z, outputItemName, 1, 0);
            
            // 移除上方的定义方块（重置为空气）
            world.setBlock(x, y + 1, z, "minecraft:air");
            
            // 重置为初始机器状态
            updateLoomByDirection(initialBlockName);
        } else {
            // 定义方块不匹配错误处理
            sendMessageToAllPlayers("§cThis loom is not ready for " + itemName + "! Check the setup.");
        }
    } else {
        // 物品不匹配错误处理
        sendMessageToAllPlayers("§cYou can only use " + itemName + " on this loom at this stage!");
    }
}

startUseItemOnLoom("minecraft:string", next, "Loom:loomStringDef");

// keepUsing("minecraft:string", next, "Loom:loomStringDef");

// loomFinalOutput("minecraft:stick", next, "minecraft:wool", "Loom:loom");"                  }                  tickrate: {                     Value: 10                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  maxStack: {                     Value: 64                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                        [0]: {                           Max: 1                           Min: 1                           DV: 0                           Item: "Loom:loomH1"                        }                     }                  }                  textureBack: {                     Value: "loom:loom_side"                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: ""                  }                  onDestroyedByPlayer: {                  }                  creativeTab: {                     Value: "search"                  }                  tileEntity: {                  }                  hardness: {                     Value: 2.0f                  }                  faceBySide: {                     Value: 0b                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "facing"            }            [16]: {               Name: "loomStringDef"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:null"                  }                  onPlacedByPlayer: {                  }                  onClicked: {                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onUpdate: {                  }                  onBreak: {                     Value: ""                  }                  canRotatable: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:null"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: "loom:null"                  }                  material: {                     Value: "ground"                  }                  onAdded: {                  }                  textureEast: {                     Value: "loom:null"                  }                  stepSound: {                     Value: "stone"                  }                  toolClass: {                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "minecraft:string"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 0                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: "loom:null"                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var inv = player.getInventory();
var i = player.getCurrentSlot();
var name = inv.getItemName(i);
var data = world.getBlockMetadata(x, y-1, z); // 下方织布机方块的元数据

// 只处理 minecraft:string 物品
if (name == "minecraft:string") {
    var blockBelow = world.getBlockName(x, y-1, z); // 下方织布机方块
    
    player.swingItem();
    world.spawnParticle("cloud", x, y, z, 0.1, 0.1, 0.1);
    inv.remove("minecraft:string", 0, 1); // 消耗一个物品
    
    // 状态转换逻辑
    if (blockBelow == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG1", data);
    } else if (blockBelow == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF1", data);
    } else if (blockBelow == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE1", data);
    } else if (blockBelow == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD1", data);
    } else if (blockBelow == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC1", data);
    } else if (blockBelow == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB1", data);
    } else if (blockBelow == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA1", data);
    } else if (blockBelow == "Loom:loomA1") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", data);
        world.setBlock(x, y, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "hbm:item.rag", 1, 0); // 生成产物
    } else if (blockBelow == "Loom:loomH") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG", data);
    } else if (blockBelow == "Loom:loomG") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF", data);
    } else if (blockBelow == "Loom:loomF") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE", data);
    } else if (blockBelow == "Loom:loomE") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD", data);
    } else if (blockBelow == "Loom:loomD") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC", data);
    } else if (blockBelow == "Loom:loomC") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB", data);
    } else if (blockBelow == "Loom:loomB") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA", data);
    } else if (blockBelow == "Loom:loomA") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", data);
        world.harvestBlock(x, y, z); // 清除标记方块
        world.spawnItem(x, y, z, "hbm:item.rag", 1, 0); // 生成产物
    }
}"                  }                  tickrate: {                     Value: 10                  }                  maxStack: {                     Value: 64                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                     }                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: "loom:null"                  }                  tileEntity: {                  }                  creativeTab: {                     Value: "decorations"                  }                  onDestroyedByPlayer: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var blockBelow = world.getBlockName(x, y-1, z);
var dataBelow = world.getBlockMetadata(x, y-1, z);

// 检测下方织布机状态并掉落对应数量的线
if (blockBelow == "Loom:loomG1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 1, 0);
} else if (blockBelow == "Loom:loomF1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 2, 0);
} else if (blockBelow == "Loom:loomE1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 3, 0);
} else if (blockBelow == "Loom:loomD1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 4, 0);
} else if (blockBelow == "Loom:loomC1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 5, 0);
} else if (blockBelow == "Loom:loomB1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 6, 0);
} else if (blockBelow == "Loom:loomA1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 7, 0);
} else if (blockBelow == "Loom:loomG") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 1, 0);
} else if (blockBelow == "Loom:loomF") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 2, 0);
} else if (blockBelow == "Loom:loomE") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 3, 0);
} else if (blockBelow == "Loom:loomD") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 4, 0);
} else if (blockBelow == "Loom:loomC") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 5, 0);
} else if (blockBelow == "Loom:loomB") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 6, 0);
} else if (blockBelow == "Loom:loomA") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "minecraft:string", 7, 0);
}"                  }                  hardness: {                     Value: 0.0f                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "carpet"            }            [17]: {               Name: "loomFlaxDef"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:null"                  }                  onPlacedByPlayer: {                  }                  onClicked: {                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onUpdate: {                  }                  onBreak: {                     Value: ""                  }                  canRotatable: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:null"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: "loom:null"                  }                  material: {                     Value: "ground"                  }                  onAdded: {                  }                  textureEast: {                     Value: "loom:null"                  }                  stepSound: {                     Value: "stone"                  }                  toolClass: {                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:flaxRope"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 0                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: "loom:null"                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var inv = player.getInventory();
var i = player.getCurrentSlot();
var name = inv.getItemName(i);
var data = world.getBlockMetadata(x, y-1, z); // 下方织布机方块的元数据

// 只处理 Loom:flaxRope 物品
if (name == "Loom:flaxRope") {
    var blockBelow = world.getBlockName(x, y-1, z); // 下方织布机方块
    
    player.swingItem();
    world.spawnParticle("cloud", x, y, z, 0.1, 0.1, 0.1);
    inv.remove("Loom:flaxRope", 0, 1); // 消耗一个物品
    
    // 状态转换逻辑
    if (blockBelow == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG1", data);
    } else if (blockBelow == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF1", data);
    } else if (blockBelow == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE1", data);
    } else if (blockBelow == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD1", data);
    } else if (blockBelow == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC1", data);
    } else if (blockBelow == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB1", data);
    } else if (blockBelow == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA1", data);
    } else if (blockBelow == "Loom:loomA1") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", data);
        world.setBlock(x, y, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    } else if (blockBelow == "Loom:loomH") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG", data);
    } else if (blockBelow == "Loom:loomG") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF", data);
    } else if (blockBelow == "Loom:loomF") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE", data);
    } else if (blockBelow == "Loom:loomE") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD", data);
    } else if (blockBelow == "Loom:loomD") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC", data);
    } else if (blockBelow == "Loom:loomC") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB", data);
    } else if (blockBelow == "Loom:loomB") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA", data);
    } else if (blockBelow == "Loom:loomA") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", data);
        world.setBlock(x, y, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "camping:parts", 1, 0); // 生成产物
    }
}"                  }                  tickrate: {                     Value: 10                  }                  maxStack: {                     Value: 64                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                     }                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: "loom:null"                  }                  tileEntity: {                  }                  creativeTab: {                     Value: "decorations"                  }                  onDestroyedByPlayer: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var blockBelow = world.getBlockName(x, y-1, z);
var dataBelow = world.getBlockMetadata(x, y-1, z);

// 检测下方织布机状态并掉落对应数量的麻绳
if (blockBelow == "Loom:loomG1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 1, 0);
} else if (blockBelow == "Loom:loomF1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 2, 0);
} else if (blockBelow == "Loom:loomE1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 3, 0);
} else if (blockBelow == "Loom:loomD1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 4, 0);
} else if (blockBelow == "Loom:loomC1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 5, 0);
} else if (blockBelow == "Loom:loomB1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 6, 0);
} else if (blockBelow == "Loom:loomA1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 7, 0);
} else if (blockBelow == "Loom:loomG") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 1, 0);
} else if (blockBelow == "Loom:loomF") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 2, 0);
} else if (blockBelow == "Loom:loomE") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 3, 0);
} else if (blockBelow == "Loom:loomD") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 4, 0);
} else if (blockBelow == "Loom:loomC") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 5, 0);
} else if (blockBelow == "Loom:loomB") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 6, 0);
} else if (blockBelow == "Loom:loomA") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:flaxRope", 7, 0);
}"                  }                  hardness: {                     Value: 0.0f                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "carpet"            }            [18]: {               Name: "loomGrassDef"               Attributes: {                  onBonemeal: {                  }                  onCollided: {                  }                  flammability: {                     Value: 10                  }                  transparent: {                     Value: 0b                  }                  expDropMin: {                     Value: 0                  }                  textureBottom: {                     Value: "loom:null"                  }                  onPlacedByPlayer: {                  }                  onClicked: {                  }                  canPlaceOnFloor: {                     Value: 1b                  }                  canPlaceOnWall: {                     Value: 1b                  }                  onUpdate: {                  }                  onBreak: {                     Value: ""                  }                  canRotatable: {                     Value: 0b                  }                  useFortune: {                     Value: 0b                  }                  fortuneModifier: {                     Value: 0                  }                  resistance: {                     Value: 0.0f                  }                  textureTop: {                     Value: "loom:null"                  }                  hasCollision: {                     Value: 1b                  }                  textureSouth: {                     Value: "loom:null"                  }                  material: {                     Value: "ground"                  }                  onAdded: {                  }                  textureEast: {                     Value: "loom:null"                  }                  stepSound: {                     Value: "stone"                  }                  toolClass: {                  }                  containerItem: {                  }                  harvestLevel: {                     Value: 0                  }                  pick: {                     Damage: 0s                     ItemName: "Loom:grassRope"                     Count: 1b                  }                  addToCreative: {                     Value: 1b                  }                  leaveContainerItem: {                     Value: 0b                  }                  blocksPiston: {                     Value: 0b                  }                  expDropMax: {                     Value: 0                  }                  onFallenUpon: {                  }                  opacity: {                     Value: 0                  }                  isFireSource: {                     Value: 0b                  }                  onWalking: {                  }                  displayName: {                     Value: "织布机"                  }                  semiTransparent: {                     Value: 0b                  }                  textureNorth: {                     Value: "loom:null"                  }                  canSilkHarvest: {                     Value: 0b                  }                  onRedstoneSignal: {                  }                  onPlacedBy: {                  }                  onPlaced: {                  }                  light: {                     Value: 0                  }                  isBurning: {                     Value: 0b                  }                  onActivated: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var inv = player.getInventory();
var i = player.getCurrentSlot();
var name = inv.getItemName(i);
var data = world.getBlockMetadata(x, y-1, z); // 下方织布机方块的元数据

// 只处理 Loom:grassRope 物品
if (name == "Loom:grassRope") {
    var blockBelow = world.getBlockName(x, y-1, z); // 下方织布机方块
    
    player.swingItem();
    world.spawnParticle("cloud", x, y, z, 0.1, 0.1, 0.1);
    inv.remove("Loom:grassRope", 0, 1); // 消耗一个物品
    
    // 状态转换逻辑
    if (blockBelow == "Loom:loomH1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG1", data);
    } else if (blockBelow == "Loom:loomG1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF1", data);
    } else if (blockBelow == "Loom:loomF1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE1", data);
    } else if (blockBelow == "Loom:loomE1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD1", data);
    } else if (blockBelow == "Loom:loomD1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC1", data);
    } else if (blockBelow == "Loom:loomC1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB1", data);
    } else if (blockBelow == "Loom:loomB1") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA1", data);
    } else if (blockBelow == "Loom:loomA1") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", data);
        world.setBlock(x, y, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    } else if (blockBelow == "Loom:loomH") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomG", data);
    } else if (blockBelow == "Loom:loomG") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomF", data);
    } else if (blockBelow == "Loom:loomF") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomE", data);
    } else if (blockBelow == "Loom:loomE") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomD", data);
    } else if (blockBelow == "Loom:loomD") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomC", data);
    } else if (blockBelow == "Loom:loomC") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomB", data);
    } else if (blockBelow == "Loom:loomB") {
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomA", data);
    } else if (blockBelow == "Loom:loomA") {
        // 最终产出阶段
        world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", data);
        world.setBlock(x, y, z, "minecraft:air"); // 清除标记方块
        world.spawnItem(x, y, z, "Loom:grassFabric", 1, 0); // 生成产物
    }
}"                  }                  tickrate: {                     Value: 10                  }                  maxStack: {                     Value: 64                  }                  canPlaceOnCeiling: {                     Value: 1b                  }                  information: {                  }                  tileTransparent: {                     Value: 0b                  }                  isWood: {                     Value: 0b                  }                  drop: {                     Drops: {                     }                  }                  onNeighborChange: {                  }                  slipperiness: {                     Value: 0.6f                  }                  textureWest: {                     Value: "loom:null"                  }                  tileEntity: {                  }                  creativeTab: {                     Value: "decorations"                  }                  onDestroyedByPlayer: {                     Value: "var x = position.x;
var y = position.y;
var z = position.z;
var blockBelow = world.getBlockName(x, y-1, z);
var dataBelow = world.getBlockMetadata(x, y-1, z);

// 检测下方织布机状态并掉落对应数量的草绳
if (blockBelow == "Loom:loomG1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 1, 0);
} else if (blockBelow == "Loom:loomF1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 2, 0);
} else if (blockBelow == "Loom:loomE1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 3, 0);
} else if (blockBelow == "Loom:loomD1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 4, 0);
} else if (blockBelow == "Loom:loomC1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 5, 0);
} else if (blockBelow == "Loom:loomB1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 6, 0);
} else if (blockBelow == "Loom:loomA1") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH1", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 7, 0);
} else if (blockBelow == "Loom:loomG") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 1, 0);
} else if (blockBelow == "Loom:loomF") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 2, 0);
} else if (blockBelow == "Loom:loomE") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 3, 0);
} else if (blockBelow == "Loom:loomD") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 4, 0);
} else if (blockBelow == "Loom:loomC") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 5, 0);
} else if (blockBelow == "Loom:loomB") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 6, 0);
} else if (blockBelow == "Loom:loomA") {
    world.setBlockAndMetadata(x, y-1, z, "Loom:loomH", dataBelow);
    world.spawnItem(x, y, z, "Loom:grassRope", 7, 0);
}"                  }                  hardness: {                     Value: 0.0f                  }                  isBeaconBase: {                     Value: 0b                  }                  onRandomDisplayTick: {                  }                  fireSpreadSpeed: {                     Value: 10                  }               }               Type: "carpet"            }         }      }      [11]: {         Name: "WorldGenRegistry"         ContentList: {         }      }      [12]: {         Name: "TradeRecipeRegistry"         ContentList: {         }      }      [13]: {         Name: "GrassPlantRegistry"         ContentList: {         }      }      [14]: {         Name: "GrassSeedRegistry"         ContentList: {         }      }      [15]: {         Name: "ChestItemRegistry"         ContentList: {         }      }      [16]: {         Name: "MobSpawnRegistry"         ContentList: {         }      }      [17]: {         Name: "DungeonMobRegistry"         ContentList: {         }      }      [18]: {         Name: "MobDropRegistry"         ContentList: {         }      }      [19]: {         Name: "EventRegistry"         ContentList: {         }      }      [20]: {         Name: "饰品注册表"         ContentList: {         }      }   }}